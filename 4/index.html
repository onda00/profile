<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Special-Srit</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
</head>

<style>
    :root {
        --lavender-light: #f3f0ff;
        --lavender-medium: #e9e5ff;
        --lavender-dark: #9c88ff;
        --lavender-accent: #7c3aed;
        --text-primary: #4c1d95;
        --text-secondary: #6b46c1;
    }

    @font-face {
        font-family: "Gyeonggi_Cheonnyeon";
        src: url('../Asset/Fonts/Gyeonggi_Cheonnyeon[Bold].ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
    }

    * {
        scroll-behavior: smooth;
        font-family: Gyeonggi_Cheonnyeon;
    }

    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, var(--lavender-light) 0%, var(--lavender-medium) 100%);
        color: var(--text-primary);
        line-height: 1.6;
    }

    .navbar {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(156, 136, 255, 0.1);
    }

    .navbar-brand {
        font-weight: 700;
        color: var(--lavender-accent) !important;
        font-size: 1.5rem;
    }

    .nav-link {
        color: var(--text-secondary) !important;
        font-weight: 500;
        transition: color 0.3s ease;
    }

    .nav-link:hover {
        color: var(--lavender-accent) !important;
    }

    .section {
        padding: 80px 0;
        min-height: 100vh;
        display: flex;
        align-items: center;
    }

    .section-title {
        font-size: 3rem;
        font-weight: 300;
        color: var(--lavender-accent);
        margin-bottom: 3rem;
        text-align: center;
        position: relative;
    }

    .section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 3px;
        background: var(--lavender-dark);
        border-radius: 2px;
    }

    .card {
        background: rgba(255, 255, 255, 0.8);
        border: none;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(156, 136, 255, 0.15);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 60px rgba(156, 136, 255, 0.25);
    }

    .about-card {
        padding: 3rem;
    }

    .about-content {
        text-align: left;
        padding-left: 2rem;
    }

    .profile-img {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--lavender-dark);
        box-shadow: 0 10px 30px rgba(156, 136, 255, 0.3);
    }

    .strength-card {
        padding: 2rem;
        text-align: center;
        height: 100%;
        border-left: 4px solid var(--lavender-dark);
    }

    .strength-icon {
        font-size: 3rem;
        color: var(--lavender-accent);
        margin-bottom: 1rem;
    }

    .project-card {
        padding: 2rem;
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    .project-img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 1.5rem;
        background: var(--lavender-medium);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4rem;
        color: var(--lavender-accent);
    }

    .project-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .project-meta {
        margin-top: auto;
        padding-top: 1rem;
    }

    .language-badge {
        background: var(--lavender-medium);
        color: var(--lavender-accent);
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
        display: inline-block;
    }

    .project-stats {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 1rem;
    }

    .project-stats i {
        margin-right: 0.5rem;
    }

    .btn-lavender {
        background: var(--lavender-accent);
        border: none;
        color: white;
        padding: 12px 30px;
        border-radius: 25px;
        font-weight: 500;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .btn-lavender:hover {
        background: var(--text-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3);
    }

    .award-card {
        padding: 2rem;
        text-align: center;
        height: 100%;
        border-left: 4px solid var(--lavender-dark);
    }

    .award-icon {
        font-size: 3rem;
        color: var(--lavender-accent);
        margin-bottom: 1rem;
    }

    /* Audio Visualizer */
    .audio-visualizer-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 2rem;
        backdrop-filter: blur(10px);
    }

    #visualizer-canvas {
        width: 100%;
        height: 300px;
        border-radius: 15px;
        background: linear-gradient(135deg, rgba(156, 136, 255, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%);
        margin-bottom: 1.5rem;
    }

    .audio-controls {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        align-items: center;
    }

    .audio-player {
        width: 100%;
        max-width: 500px;
    }

    .control-buttons {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: center;
    }

    .visualizer-button {
        background: var(--lavender-accent);
        border: none;
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 500;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .visualizer-button:hover {
        background: var(--text-primary);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
    }

    .visualizer-button.active {
        background: var(--text-primary);
        box-shadow: 0 0 20px rgba(124, 58, 237, 0.5);
    }

    .track-info {
        text-align: center;
        margin-bottom: 1rem;
    }

    .track-title {
        font-size: 1.2rem;
        color: var(--lavender-accent);
        margin-bottom: 0.5rem;
    }

    .track-artist {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .personal-project-card {
        padding: 2rem;
        text-align: center;
        height: 100%;
        border-left: 4px solid var(--lavender-dark);
    }

    .personal-project-icon {
        font-size: 3rem;
        color: var(--lavender-accent);
        margin-bottom: 1rem;
    }

    .social-links a {
        color: var(--lavender-accent);
        font-size: 1.5rem;
        margin: 0 10px;
        transition: color 0.3s ease;
    }

    .social-links a:hover {
        color: var(--text-primary);
    }

    .floating-shapes {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
        pointer-events: none;
    }

    .shape {
        position: absolute;
        opacity: 0.1;
        animation: float 15s infinite ease-in-out;
    }

    .shape:nth-child(1) {
        top: 10%;
        left: 10%;
        width: 80px;
        height: 80px;
        background: var(--lavender-dark);
        border-radius: 50%;
        animation-delay: 0s;
        animation-duration: 20s;
    }

    .shape:nth-child(2) {
        top: 20%;
        right: 20%;
        width: 120px;
        height: 120px;
        background: var(--lavender-accent);
        clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        animation-delay: 2s;
        animation-duration: 25s;
    }

    .shape:nth-child(3) {
        top: 60%;
        left: 5%;
        width: 60px;
        height: 60px;
        background: var(--lavender-medium);
        transform: rotate(45deg);
        animation-delay: 4s;
        animation-duration: 18s;
    }

    .shape:nth-child(4) {
        top: 70%;
        right: 10%;
        width: 100px;
        height: 100px;
        background: var(--lavender-dark);
        border-radius: 20px;
        animation-delay: 6s;
        animation-duration: 22s;
    }

    .shape:nth-child(5) {
        top: 40%;
        left: 70%;
        width: 90px;
        height: 90px;
        background: var(--lavender-accent);
        border-radius: 50% 0;
        animation-delay: 8s;
        animation-duration: 30s;
    }

    .shape:nth-child(6) {
        top: 80%;
        left: 40%;
        width: 70px;
        height: 70px;
        background: var(--lavender-medium);
        clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
        animation-delay: 10s;
        animation-duration: 16s;
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0px) rotate(0deg);
        }

        25% {
            transform: translateY(-20px) rotate(90deg);
        }

        50% {
            transform: translateY(-40px) rotate(180deg);
        }

        75% {
            transform: translateY(-20px) rotate(270deg);
        }
    }

    .footer {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 2rem 0;
        margin-top: 2rem;
    }

    .social-links {
        text-align: center;
        margin-bottom: 1rem;
    }

    .social-links a {
        color: var(--lavender-accent);
        font-size: 2rem;
        margin: 0 15px;
        transition: all 0.3s ease;
        display: inline-block;
    }

    .social-links a:hover {
        color: var(--text-primary);
        transform: translateY(-5px);
    }

    @media (max-width: 768px) {
        .section-title {
            font-size: 2.5rem;
        }

        .section {
            padding: 60px 0;
        }

        .shape {
            opacity: 0.05;
        }

        .about-content {
            text-align: center;
            padding-left: 0;
            margin-top: 2rem;
        }

        .social-links a {
            font-size: 1.8rem;
            margin: 0 10px;
        }

        .control-buttons {
            flex-direction: column;
            align-items: center;
        }

        #visualizer-canvas {
            height: 200px;
        }
    }
</style>

<body>
    <!-- Background Shapes -->
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">Portfolio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#strengths">Strengths</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#award">Awards</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#personal-projects">Personal Projects</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#projects">GitHub Projects</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- About Me Section -->
    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <div class="row justify-content-center align-items-center">
                <div class="col-lg-10">
                    <div class="card about-card">
                        <div class="row align-items-center">
                            <div class="col-lg-5 text-center">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23e9e5ff'/%3E%3Ctext x='100' y='115' text-anchor='middle' font-size='50' fill='%237c3aed'%3E👋%3C/text%3E%3C/svg%3E"
                                    alt="Profile" class="profile-img">
                            </div>
                            <div class="col-lg-7">
                                <div class="about-content">
                                    <h3 class="mb-3" style="color: var(--lavender-accent);">Hello, I'm Special-Srit</h3>
                                    <p class="lead mb-4">안녕하세요, Special-Srit이라 하는 한 프로그래머 유망생 입니다.
                                        주로 HTML/C/C++/Python을 다루지만, js/Java등의 언어도 쓸 수 있으며, 또한 Figma/Github의 툴을
                                        자유자제로 이용할 수 있습니다.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Strengths Section -->
    <section id="strengths" class="section">
        <div class="container">
            <h2 class="section-title">My Strengths</h2>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card strength-card">
                        <div class="strength-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h4 class="mb-3" style="color: var(--lavender-accent);">Web Development</h4>
                        <p>웹 개발에 필요한, Html 5, Css, JavaScript, Bootstrap, 등의 메우 기본적이지만 필수인 것들을 자유자제로 다룰 수 있습니다.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card strength-card">
                        <div class="strength-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <h4 class="mb-3" style="color: var(--lavender-accent);">UI/UX Design</h4>
                        <p>현재 시대의 모던한 또한 깔끔한 UI/UX를 디자인이 가능하며, 또한 이용자가 편리하게 사용할 수 있는데에 집중합니다.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card strength-card">
                        <div class="strength-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4 class="mb-3" style="color: var(--lavender-accent);">Teamwork/cooperation</h4>
                        <p>팀원들과 커뮤니케이션이 잘 되며, 팀워크로 Output의 퀄리티는 올리고 제작기간은 단축시킵니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Award Section -->
    <section id="award" class="section">
        <div class="container">
            <h2 class="section-title">Received Awards</h2>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card award-card">
                        <div class="award-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <h4 class="mb-3" style="color: var(--lavender-accent);">Not Yet</h4>
                        <p>아직까진 실질적으로 인정받는 수상 경력이 없습니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Personal Projects Section -->
    <section id="personal-projects" class="section">
        <div class="container">
            <h2 class="section-title">Personal Projects</h2>
            <div class="row g-4">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="text-center mb-4" style="color: var(--lavender-accent);">Audio Visualizer</h3>
                            <div class="audio-visualizer-container">
                                <div class="track-info">
                                    <div class="track-title" id="track-title">Select a track to play</div>
                                    <div class="track-artist" id="track-artist">Audio Visualizer Demo</div>
                                </div>

                                <canvas id="visualizer-canvas"></canvas>

                                <div class="audio-controls">
                                    <audio id="audio-player" class="audio-player" controls>
                                        <source src="" type="audio/mpeg">
                                        Your browser does not support the audio element.
                                    </audio>

                                    <div class="control-buttons">
                                        <button class="visualizer-button" id="bars-btn">Bars</button>
                                        <button class="visualizer-button" id="wave-btn">Wave</button>
                                        <button class="visualizer-button active" id="circle-btn">Circle</button>
                                        <button class="visualizer-button" id="particles-btn">Particles</button>
                                    </div>

                                    <div class="control-buttons">
                                        <button class="visualizer-button" id="demo-track-1">Music 1</button>
                                        <button class="visualizer-button" id="demo-track-2">Music 2</button>
                                        <button class="visualizer-button" id="demo-track-3">Music 3</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- GitHub Projects Section -->
    <section id="projects" class="section">
        <div class="container">
            <h2 class="section-title">GitHub Projects</h2>
            <div id="projects-container" class="row g-4">
                <!-- Loading state -->
                <div class="col-12 text-center" id="loading">
                    <div class="spinner-border" style="color: var(--lavender-accent);" role="status">
                        <span class="visually-hidden">Loading projects...</span>
                    </div>
                    <p class="mt-3" style="color: var(--text-secondary);">Fetching latest projects from GitHub...</p>
                </div>
            </div>
            <div class="text-center mt-4">
                <a href="https://github.com/Special-Srit" target="_blank" class="btn-lavender">
                    <i class="fab fa-github me-2"></i>View All Repositories
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="social-links">
                <a href="https://github.com/Special-Srit" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="mailto:coder.srit@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
            </div>
            <p class="text-center mb-0" style="color: var(--text-secondary);">
                &copy; 2025 Special-Srit. Made with effort(?) and lots of Caffeine
            </p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js">
        // GitHub Projects Integration
        const GITHUB_USERNAME = 'Special-Srit';

        // Language to icon mapping
        const languageIcons = {
            'JavaScript': 'fab fa-js-square',
            'TypeScript': 'fab fa-js-square',
            'Python': 'fab fa-python',
            'React': 'fab fa-react',
            'Vue': 'fab fa-vuejs',
            'HTML': 'fab fa-html5',
            'CSS': 'fab fa-css3-alt',
            'Java': 'fab fa-java',
            'PHP': 'fab fa-php',
            'Ruby': 'fas fa-gem',
            'Go': 'fas fa-code',
            'Rust': 'fas fa-cog',
            'C++': 'fas fa-code',
            'C': 'fas fa-code',
            'Shell': 'fas fa-terminal',
            'Jupyter Notebook': 'fas fa-chart-bar',
            'default': 'fas fa-code'
        };

        async function fetchGitHubProjects() {
            try {
                const response = await fetch(`https://api.github.com/users/${GITHUB_USERNAME}/repos?sort=updated&per_page=6`);

                if (!response.ok) {
                    throw new Error('GitHub API request failed');
                }

                const repos = await response.json();
                displayProjects(repos);
            } catch (error) {
                console.error('Error fetching GitHub projects:', error);
                displayFallbackProjects();
            }
        }

        function displayProjects(repos) {
            const container = document.getElementById('projects-container');
            const loading = document.getElementById('loading');

            loading.remove();

            const filteredRepos = repos
                .filter(repo => !repo.fork && repo.description)
                .slice(0, 3);

            filteredRepos.forEach(repo => {
                const projectCard = createProjectCard(repo);
                container.appendChild(projectCard);
            });
        }

        function createProjectCard(repo) {
            const col = document.createElement('div');
            col.className = 'col-lg-4 col-md-6';

            const iconClass = languageIcons[repo.language] || languageIcons['default'];
            const updatedDate = new Date(repo.updated_at).toLocaleDateString();

            col.innerHTML = `
                <div class="card project-card">
                    <div class="project-img">
                        <i class="${iconClass}"></i>
                    </div>
                    <div class="project-content">
                        <h4 class="mb-3" style="color: var(--lavender-accent);">${repo.name.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}</h4>
                        <p class="mb-3">${repo.description || 'No description available.'}</p>
                        <div class="project-stats">
                            <i class="fas fa-star"></i>${repo.stargazers_count}
                            <i class="fas fa-code-branch ms-3"></i>${repo.forks_count}
                            <i class="fas fa-clock ms-3"></i>Updated ${updatedDate}
                        </div>
                        ${repo.language ? `<div class="mb-3"><span class="language-badge">${repo.language}</span></div>` : ''}
                        <div class="project-meta">
                            <a href="${repo.html_url}" target="_blank" class="btn-lavender me-2">
                                <i class="fab fa-github me-1"></i>View Code
                            </a>
                            ${repo.homepage ? `<a href="${repo.homepage}" target="_blank" class="btn-lavender">Live Demo</a>` : ''}
                        </div>
                    </div>
                </div>
            `;

            return col;
        }

        function displayFallbackProjects() {
            const container = document.getElementById('projects-container');
            const loading = document.getElementById('loading');

            loading.innerHTML = `
                <div class="col-12 text-center">
                    <p style="color: var(--text-secondary);">
                        Unable to load projects from GitHub. Please check the username or try again later.
                    </p>
                </div>
            `;
        }

        // Audio Visualizer
        class AudioVisualizer {
            constructor() {
                this.canvas = document.getElementById('visualizer-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.audio = document.getElementById('audio-player');
                this.audioContext = null;
                this.analyser = null;
                this.dataArray = null;
                this.source = null;
                this.isInitialized = false;
                this.animationId = null;
                this.visualizationType = 'circle';

                this.setupCanvas();
                this.setupEventListeners();
                this.generateDemoAudio();
            }

            setupCanvas() {
                const resizeCanvas = () => {
                    const rect = this.canvas.getBoundingClientRect();
                    this.canvas.width = rect.width * window.devicePixelRatio;
                    this.canvas.height = rect.height * window.devicePixelRatio;
                    this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
                };

                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);
            }

            async initializeAudio() {
                if (this.isInitialized) return;

                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.analyser = this.audioContext.createAnalyser();
                    this.source = this.audioContext.createMediaElementSource(this.audio);
                    this.source.connect(this.analyser);
                    this.analyser.connect(this.audioContext.destination);

                    this.analyser.fftSize = 256;
                    this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);
                    this.isInitialized = true;
                } catch (error) {
                    console.error('Error initializing audio context:', error);
                }
            }

            generateDemoAudio() {
                // Generate synthetic audio data for demo purposes
                this.demoTracks = {
                    'demo1': {
                        title: 'Synthetic Wave',
                        artist: 'Audio Generator',
                        url: '../Asset/music/Clearscapes.mp3' // 440Hz for 5 seconds
                    },
                    'demo2': {
                        title: 'Digital Harmony',
                        artist: 'Frequency Synth',
                        url: this.generateComplexWave(330, 5)
                    },
                    'demo3': {
                        title: 'Ambient Pulse',
                        artist: 'Wave Generator',
                        url: this.generatePulseWave(220, 5)
                    }
                };
            }

            generateSineWave(frequency, duration) {
                const sampleRate = 44100;
                const numSamples = sampleRate * duration;
                const audioBuffer = new AudioBuffer({
                    numberOfChannels: 1,
                    length: numSamples,
                    sampleRate: sampleRate
                });

                const channelData = audioBuffer.getChannelData(0);
                for (let i = 0; i < numSamples; i++) {
                    channelData[i] = Math.sin(2 * Math.PI * frequency * i / sampleRate) * 0.3;
                }

                return this.audioBufferToBlob(audioBuffer);
            }

            generateComplexWave(baseFreq, duration) {
                const sampleRate = 44100;
                const numSamples = sampleRate * duration;
                const audioBuffer = new AudioBuffer({
                    numberOfChannels: 1,
                    length: numSamples,
                    sampleRate: sampleRate
                });

                const channelData = audioBuffer.getChannelData(0);
                for (let i = 0; i < numSamples; i++) {
                    const t = i / sampleRate;
                    channelData[i] = (
                        Math.sin(2 * Math.PI * baseFreq * t) * 0.3 +
                        Math.sin(2 * Math.PI * baseFreq * 1.5 * t) * 0.2 +
                        Math.sin(2 * Math.PI * baseFreq * 2 * t) * 0.1
                    );
                }

                return this.audioBufferToBlob(audioBuffer);
            }

            generatePulseWave(frequency, duration) {
                const sampleRate = 44100;
                const numSamples = sampleRate * duration;
                const audioBuffer = new AudioBuffer({
                    numberOfChannels: 1,
                    length: numSamples,
                    sampleRate: sampleRate
                });

                const channelData = audioBuffer.getChannelData(0);
                for (let i = 0; i < numSamples; i++) {
                    const t = i / sampleRate;
                    const pulse = Math.sin(2 * Math.PI * frequency * t) > 0 ? 0.3 : -0.3;
                    channelData[i] = pulse * (0.5 + 0.5 * Math.sin(2 * Math.PI * 0.5 * t));
                }

                return this.audioBufferToBlob(audioBuffer);
            }

            audioBufferToBlob(audioBuffer) {
                const length = audioBuffer.length;
                const arrayBuffer = new ArrayBuffer(44 + length * 2);
                const view = new DataView(arrayBuffer);


                const writeString = (offset, string) => {
                    for (let i = 0; i < string.length; i++) {
                        view.setUint8(offset + i, string.charCodeAt(i));
                    }
                };

                writeString(0, 'RIFF');
                view.setUint32(4, 36 + length * 2, true);
                writeString(8, 'WAVE');
                writeString(12, 'fmt ');
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                view.setUint16(22, 1, true);
                view.setUint32(24, audioBuffer.sampleRate, true);
                view.setUint32(28, audioBuffer.sampleRate * 2, true);
                view.setUint16(32, 2, true);
                view.setUint16(34, 16, true);
                writeString(36, 'data');
                view.setUint32(40, length * 2, true);


                const channelData = audioBuffer.getChannelData(0);
                let offset = 44;
                for (let i = 0; i < length; i++) {
                    const sample = Math.max(-1, Math.min(1, channelData[i]));
                    view.setInt16(offset, sample * 0x7FFF, true);
                    offset += 2;
                }

                return URL.createObjectURL(new Blob([arrayBuffer], { type: 'audio/wav' }));
            }

            setupEventListeners() {

                this.audio.addEventListener('play', async () => {
                    await this.initializeAudio();
                    if (this.audioContext.state === 'suspended') {
                        await this.audioContext.resume();
                    }
                    this.startVisualization();
                });

                this.audio.addEventListener('pause', () => {
                    this.stopVisualization();
                });

                // Visualization type buttons
                document.getElementById('bars-btn').addEventListener('click', () => {
                    this.setVisualizationType('bars');
                });
                document.getElementById('wave-btn').addEventListener('click', () => {
                    this.setVisualizationType('wave');
                });
                document.getElementById('circle-btn').addEventListener('click', () => {
                    this.setVisualizationType('circle');
                });
                document.getElementById('particles-btn').addEventListener('click', () => {
                    this.setVisualizationType('particles');
                });

                // Demo track buttons
                document.getElementById('demo-track-1').addEventListener('click', () => {
                    this.loadTrack('demo1');
                });
                document.getElementById('demo-track-2').addEventListener('click', () => {
                    this.loadTrack('demo2');
                });
                document.getElementById('demo-track-3').addEventListener('click', () => {
                    this.loadTrack('demo3');
                });
            }

            setVisualizationType(type) {
                this.visualizationType = type;


                document.querySelectorAll('.visualizer-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(`${type}-btn`).classList.add('active');
            }

            loadTrack(trackId) {
                const track = this.demoTracks[trackId];
                if (track) {
                    this.audio.src = track.url;
                    document.getElementById('track-title').textContent = track.title;
                    document.getElementById('track-artist').textContent = track.artist;
                }
            }

            startVisualization() {
                if (this.animationId) return;
                this.visualize();
            }

            stopVisualization() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }

            visualize() {
                this.animationId = requestAnimationFrame(() => this.visualize());

                if (!this.analyser) return;

                this.analyser.getByteFrequencyData(this.dataArray);
                this.clearCanvas();

                switch (this.visualizationType) {
                    case 'bars':
                        this.drawBars();
                        break;
                    case 'wave':
                        this.drawWave();
                        break;
                    case 'circle':
                        this.drawCircle();
                        break;
                    case 'particles':
                        this.drawParticles();
                        break;
                }
            }

            clearCanvas() {
                const rect = this.canvas.getBoundingClientRect();
                this.ctx.clearRect(0, 0, rect.width, rect.height);
            }

            drawBars() {
                const rect = this.canvas.getBoundingClientRect();
                const barWidth = rect.width / this.dataArray.length * 2;
                let x = 0;

                for (let i = 0; i < this.dataArray.length; i++) {
                    const barHeight = (this.dataArray[i] / 255) * rect.height * 0.8;

                    const hue = (i / this.dataArray.length) * 360;
                    this.ctx.fillStyle = `hsl(${hue}, 70%, 60%)`;

                    this.ctx.fillRect(x, rect.height - barHeight, barWidth, barHeight);
                    x += barWidth + 1;
                }
            }

            drawWave() {
                const rect = this.canvas.getBoundingClientRect();
                this.ctx.strokeStyle = '#7c3aed';
                this.ctx.lineWidth = 3;
                this.ctx.beginPath();

                const sliceWidth = rect.width / this.dataArray.length;
                let x = 0;

                for (let i = 0; i < this.dataArray.length; i++) {
                    const v = this.dataArray[i] / 255;
                    const y = rect.height / 2 + (v - 0.5) * rect.height * 0.6;

                    if (i === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }

                    x += sliceWidth;
                }

                this.ctx.stroke();
            }

            drawCircle() {
                const rect = this.canvas.getBoundingClientRect();
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const radius = Math.min(rect.width, rect.height) / 4;

                this.ctx.strokeStyle = '#7c3aed';
                this.ctx.lineWidth = 2;

                for (let i = 0; i < this.dataArray.length; i++) {
                    const angle = (i / this.dataArray.length) * Math.PI * 2;
                    const amplitude = (this.dataArray[i] / 255) * radius;

                    const x1 = centerX + Math.cos(angle) * radius;
                    const y1 = centerY + Math.sin(angle) * radius;
                    const x2 = centerX + Math.cos(angle) * (radius + amplitude);
                    const y2 = centerY + Math.sin(angle) * (radius + amplitude);

                    const hue = (i / this.dataArray.length) * 360;
                    this.ctx.strokeStyle = `hsl(${hue}, 70%, 60%)`;

                    this.ctx.beginPath();
                    this.ctx.moveTo(x1, y1);
                    this.ctx.lineTo(x2, y2);
                    this.ctx.stroke();
                }
            }

            drawParticles() {
                const rect = this.canvas.getBoundingClientRect();

                if (!this.particles) {
                    this.particles = [];
                    for (let i = 0; i < 100; i++) {
                        this.particles.push({
                            x: Math.random() * rect.width,
                            y: Math.random() * rect.height,
                            vx: (Math.random() - 0.5) * 2,
                            vy: (Math.random() - 0.5) * 2,
                            size: Math.random() * 3 + 1
                        });
                    }
                }

                const avgFreq = this.dataArray.reduce((a, b) => a + b) / this.dataArray.length;
                const intensity = avgFreq / 255;

                this.particles.forEach((particle, index) => {
                    particle.x += particle.vx * (1 + intensity);
                    particle.y += particle.vy * (1 + intensity);

                    if (particle.x < 0 || particle.x > rect.width) particle.vx *= -1;
                    if (particle.y < 0 || particle.y > rect.height) particle.vy *= -1;

                    particle.x = Math.max(0, Math.min(rect.width, particle.x));
                    particle.y = Math.max(0, Math.min(rect.height, particle.y));

                    const hue = (index / this.particles.length) * 360;
                    this.ctx.fillStyle = `hsla(${hue}, 70%, 60%, ${intensity})`;
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size * (1 + intensity), 0, Math.PI * 2);
                    this.ctx.fill();
                });
            }
        }


        document.addEventListener('DOMContentLoaded', function () {
            fetchGitHubProjects();
            new AudioVisualizer();
        });
    </script>
</body>

</html>